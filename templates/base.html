<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Fiunite - Connect Through Vibes{% endblock %}</title>
    
    <!-- Meta Tags -->
    <meta name="description" content="{% block description %}Fiunite - The social platform that connects people through their vibes and activities{% endblock %}">
    <meta name="keywords" content="social, networking, vibes, activities, friends, connection">
    <meta name="author" content="Fiunite">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:title" content="{% block og_title %}{{ self.title() }}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{{ self.description() }}{% endblock %}">
    <meta property="og:image" content="{% block og_image %}{{ url_for('static', filename='images/og-image.jpg') }}{% endblock %}">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ request.url }}">
    <meta property="twitter:title" content="{% block twitter_title %}{{ self.title() }}{% endblock %}">
    <meta property="twitter:description" content="{% block twitter_description %}{{ self.description() }}{% endblock %}">
    <meta property="twitter:image" content="{% block twitter_image %}{{ url_for('static', filename='images/og-image.jpg') }}{% endblock %}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='images/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='images/favicon-16x16.png') }}">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    
    <!-- Additional CSS -->
    {% block extra_css %}{% endblock %}
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Fiunite",
        "description": "Connect through vibes and activities",
        "url": "{{ request.url_root }}"
    }
    </script>
</head>
<body>
    <!-- Floating Background Elements -->
    <div class="floating-elements">
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
    </div>
    
    <!-- Navigation -->
    {% block navigation %}
    <nav class="navbar">
        <div class="container flex items-center justify-between p-4">
            <a href="{{ url_for('splash') }}" class="navbar-brand">
                <i class="fas fa-heart"></i> Fiunite
            </a>
            
            {% if session.user_id %}
            <div class="navbar-nav flex">
                <a href="{{ url_for('vibe_form') }}" class="navbar-link">
                    <i class="fas fa-plus-circle"></i> Set Vibe
                </a>
                <a href="{{ url_for('vibe') }}" class="navbar-link">
                    <i class="fas fa-search"></i> Find Vibes
                </a>
                <a href="{{ url_for('logout') }}" class="navbar-link">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
            {% else %}
            <div class="navbar-nav flex">
                <a href="{{ url_for('login') }}" class="navbar-link">
                    <i class="fas fa-sign-in-alt"></i> Login
                </a>
                <a href="{{ url_for('signup') }}" class="navbar-link">
                    <i class="fas fa-user-plus"></i> Sign Up
                </a>
            </div>
            {% endif %}
        </div>
    </nav>
    {% endblock %}
    
    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    {% block footer %}
    <footer style="background: var(--bg-dark); color: var(--text-white); padding: var(--space-2xl) 0; margin-top: var(--space-3xl);">
        <div class="container text-center">
            <div class="mb-4">
                <h3 style="color: var(--text-white); margin-bottom: var(--space-md);">
                    <i class="fas fa-heart"></i> Fiunite
                </h3>
                <p style="color: var(--text-light); max-width: 600px; margin: 0 auto;">
                    Connect with people who share your vibes. Discover activities, make friends, and create meaningful connections.
                </p>
            </div>
            
            <div class="flex justify-center items-center gap-6 mb-4">
                <a href="/about" style="color: var(--text-light);">
                    <i class="fas fa-info-circle"></i> About
                </a>
                <a href="#" style="color: var(--text-light);">
                    <i class="fas fa-shield-alt"></i> Privacy
                </a>
                <a href="#" style="color: var(--text-light);">
                    <i class="fas fa-file-contract"></i> Terms
                </a>
                <a href="#" style="color: var(--text-light);">
                    <i class="fas fa-envelope"></i> Contact
                </a>
            </div>
            
            <div style="border-top: 1px solid #374151; padding-top: var(--space-lg); color: var(--text-light);">
                <p>&copy; 2024 Fiunite. Made with <i class="fas fa-heart" style="color: var(--secondary);"></i> for connecting people.</p>
            </div>
        </div>
    </footer>
    {% endblock %}
    
    <!-- JavaScript -->
    <script>
        // Add smooth scrolling to all links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Add loading states to forms
        document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', function() {
                const submitBtn = this.querySelector('button[type="submit"]');
                if (submitBtn) {
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = '<span class="loading"></span> Processing...';
                    submitBtn.disabled = true;
                    
                    // Re-enable after 5 seconds as fallback
                    setTimeout(() => {
                        submitBtn.innerHTML = originalText;
                        submitBtn.disabled = false;
                    }, 5000);
                }
            });
        });
        
        // Add intersection observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-fade-in');
                }
            });
        }, observerOptions);
        
        // Observe all cards and sections
        document.querySelectorAll('.card, .hero, section').forEach(el => {
            observer.observe(el);
        });
        
        // Mobile menu toggle (if needed)
        function toggleMobileMenu() {
            const nav = document.querySelector('.navbar-nav');
            if (nav) {
                nav.classList.toggle('mobile-open');
            }
        }
        
        // Add click outside to close mobile menu
        document.addEventListener('click', function(e) {
            const nav = document.querySelector('.navbar-nav');
            const menuBtn = document.querySelector('.mobile-menu-btn');
            
            if (nav && menuBtn && !nav.contains(e.target) && !menuBtn.contains(e.target)) {
                nav.classList.remove('mobile-open');
            }
        });
    </script>
    
    <!-- Additional JavaScript -->
    {% block extra_js %}{% endblock %}
</body>
</html>
